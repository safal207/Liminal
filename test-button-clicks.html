<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Button Click Test</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #f5f7fb; 
        }
        .test-section { 
            background: white; 
            padding: 20px; 
            margin: 10px 0; 
            border-radius: 8px; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.1); 
        }
        button { 
            padding: 12px 20px; 
            margin: 5px; 
            border: none; 
            border-radius: 6px; 
            background: #0a84ff; 
            color: white; 
            cursor: pointer; 
            font-weight: bold;
        }
        button:hover { background: #0060d6; }
        .log { 
            background: #f8f9fa; 
            padding: 10px; 
            margin: 10px 0; 
            border-radius: 4px; 
            font-family: monospace; 
            white-space: pre-wrap; 
        }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>üîß –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–ª–∏–∫–æ–≤ –ø–æ –∫–Ω–æ–ø–∫–∞–º</h1>
    
    <div class="test-section">
        <h3>1. –¢–µ—Å—Ç –±–∞–∑–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π</h3>
        <button onclick="testBasicFunction()">–¢–µ—Å—Ç –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏</button>
        <button onclick="window.testWindowFunction()">–¢–µ—Å—Ç window —Ñ—É–Ω–∫—Ü–∏–∏</button>
        <button onclick="testAsyncFunction()">–¢–µ—Å—Ç async —Ñ—É–Ω–∫—Ü–∏–∏</button>
        <div id="basicLog" class="log"></div>
    </div>

    <div class="test-section">
        <h3>2. –¢–µ—Å—Ç API –≤—ã–∑–æ–≤–æ–≤</h3>
        <button onclick="testApiCall()">–¢–µ—Å—Ç API –≤—ã–∑–æ–≤–∞</button>
        <button onclick="testFetchError()">–¢–µ—Å—Ç –æ—à–∏–±–∫–∏ Fetch</button>
        <div id="apiLog" class="log"></div>
    </div>

    <div class="test-section">
        <h3>3. –¢–µ—Å—Ç DOM –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π</h3>
        <button onclick="testDomManipulation()">–¢–µ—Å—Ç DOM</button>
        <button onclick="testElementAccess()">–¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º</button>
        <div id="domLog" class="log"></div>
        <div id="testTarget">–¶–µ–ª—å –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è</div>
    </div>

    <div class="test-section">
        <h3>4. –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞</h3>
        <p>–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫–∏</p>
        <button onclick="testConsoleOutput()">–¢–µ—Å—Ç –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞</button>
    </div>

    <script>
        // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏–∑ "JavaScript: The Good Parts" - –î—É–≥–ª–∞—Å –ö—Ä–æ–∫—Ñ–æ—Ä–¥
        (function() {
            'use strict';
            
            // Utility functions
            function log(elementId, message, type) {
                var element = document.getElementById(elementId);
                var timestamp = new Date().toLocaleTimeString();
                var className = type || '';
                element.innerHTML += '<span class="' + className + '">[' + timestamp + '] ' + message + '</span>\n';
                console.log('[' + timestamp + '] ' + message);
            }
            
            function clearLog(elementId) {
                document.getElementById(elementId).innerHTML = '';
            }
            
            // Test functions - —Å–ª–µ–¥—É—è –ø—Ä–∏–Ω—Ü–∏–ø–∞–º "Clean Code"
            function testBasicFunction() {
                try {
                    clearLog('basicLog');
                    log('basicLog', '–ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑–≤–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ', 'success');
                    log('basicLog', 'typeof window: ' + typeof window, 'success');
                    log('basicLog', 'typeof document: ' + typeof document, 'success');
                } catch (error) {
                    log('basicLog', '–û–®–ò–ë–ö–ê –≤ –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏: ' + error.message, 'error');
                }
            }
            
            function testWindowFunction() {
                try {
                    clearLog('basicLog');
                    log('basicLog', 'Window —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑–≤–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ', 'success');
                    log('basicLog', 'window.location.href: ' + window.location.href, 'success');
                } catch (error) {
                    log('basicLog', '–û–®–ò–ë–ö–ê –≤ window —Ñ—É–Ω–∫—Ü–∏–∏: ' + error.message, 'error');
                }
            }
            
            function testAsyncFunction() {
                try {
                    clearLog('basicLog');
                    log('basicLog', 'Async —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—â–µ–Ω–∞...', 'success');
                    
                    setTimeout(function() {
                        log('basicLog', 'Async —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É', 'success');
                    }, 1000);
                    
                } catch (error) {
                    log('basicLog', '–û–®–ò–ë–ö–ê –≤ async —Ñ—É–Ω–∫—Ü–∏–∏: ' + error.message, 'error');
                }
            }
            
            function testApiCall() {
                try {
                    clearLog('apiLog');
                    log('apiLog', '–ù–∞—á–∏–Ω–∞–µ–º API –≤—ã–∑–æ–≤...', 'success');
                    
                    // –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ä–µ–∞–ª—å–Ω—ã–π API endpoint
                    fetch('/api/top-at-risk?limit=1')
                        .then(function(response) {
                            log('apiLog', 'Response status: ' + response.status, 'success');
                            return response.json();
                        })
                        .then(function(data) {
                            log('apiLog', 'API –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã: ' + JSON.stringify(data), 'success');
                        })
                        .catch(function(error) {
                            log('apiLog', '–û–®–ò–ë–ö–ê API: ' + error.message, 'error');
                        });
                        
                } catch (error) {
                    log('apiLog', '–û–®–ò–ë–ö–ê –≤ testApiCall: ' + error.message, 'error');
                }
            }
            
            function testFetchError() {
                try {
                    clearLog('apiLog');
                    log('apiLog', '–¢–µ—Å—Ç–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ fetch...', 'success');
                    
                    fetch('/nonexistent-endpoint')
                        .then(function(response) {
                            if (!response.ok) {
                                throw new Error('HTTP ' + response.status + ': ' + response.statusText);
                            }
                            return response.json();
                        })
                        .then(function(data) {
                            log('apiLog', '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π —É—Å–ø–µ—Ö: ' + JSON.stringify(data), 'error');
                        })
                        .catch(function(error) {
                            log('apiLog', '–û–∂–∏–¥–∞–µ–º–∞—è –æ—à–∏–±–∫–∞ –ø–æ–π–º–∞–Ω–∞: ' + error.message, 'success');
                        });
                        
                } catch (error) {
                    log('apiLog', '–û–®–ò–ë–ö–ê –≤ testFetchError: ' + error.message, 'error');
                }
            }
            
            function testDomManipulation() {
                try {
                    clearLog('domLog');
                    log('domLog', '–¢–µ—Å—Ç–∏—Ä—É–µ–º DOM –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏...', 'success');
                    
                    var target = document.getElementById('testTarget');
                    if (target) {
                        target.style.background = '#e8f5e8';
                        target.style.padding = '10px';
                        target.textContent = 'DOM –∏–∑–º–µ–Ω—ë–Ω —É—Å–ø–µ—à–Ω–æ! ' + new Date().toLocaleTimeString();
                        log('domLog', 'DOM —ç–ª–µ–º–µ–Ω—Ç –∏–∑–º–µ–Ω—ë–Ω —É—Å–ø–µ—à–Ω–æ', 'success');
                    } else {
                        log('domLog', '–û–®–ò–ë–ö–ê: testTarget —ç–ª–µ–º–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                    }
                    
                } catch (error) {
                    log('domLog', '–û–®–ò–ë–ö–ê –≤ DOM –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏: ' + error.message, 'error');
                }
            }
            
            function testElementAccess() {
                try {
                    clearLog('domLog');
                    log('domLog', '–¢–µ—Å—Ç–∏—Ä—É–µ–º –¥–æ—Å—Ç—É–ø –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º...', 'success');
                    
                    var buttons = document.querySelectorAll('button');
                    log('domLog', '–ù–∞–π–¥–µ–Ω–æ –∫–Ω–æ–ø–æ–∫: ' + buttons.length, 'success');
                    
                    var inputs = document.querySelectorAll('input');
                    log('domLog', '–ù–∞–π–¥–µ–Ω–æ input —ç–ª–µ–º–µ–Ω—Ç–æ–≤: ' + inputs.length, 'success');
                    
                    var divs = document.querySelectorAll('div');
                    log('domLog', '–ù–∞–π–¥–µ–Ω–æ div —ç–ª–µ–º–µ–Ω—Ç–æ–≤: ' + divs.length, 'success');
                    
                } catch (error) {
                    log('domLog', '–û–®–ò–ë–ö–ê –≤ –¥–æ—Å—Ç—É–ø–µ –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º: ' + error.message, 'error');
                }
            }
            
            function testConsoleOutput() {
                console.log('=== –¢–ï–°–¢ –ö–û–ù–°–û–õ–¨–ù–û–ì–û –í–´–í–û–î–ê ===');
                console.log('–í—Ä–µ–º—è:', new Date().toISOString());
                console.log('User Agent:', navigator.userAgent);
                console.log('–†–∞–∑–º–µ—Ä –æ–∫–Ω–∞:', window.innerWidth + 'x' + window.innerHeight);
                console.log('–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ window:', Object.keys(window).filter(function(key) {
                    return typeof window[key] === 'function' && key.indexOf('test') === 0;
                }));
                console.log('=== –ö–û–ù–ï–¶ –¢–ï–°–¢–ê ===');
                alert('–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console)');
            }
            
            // Export functions to window - –ø—Ä–∏–Ω—Ü–∏–ø —è–≤–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
            window.testBasicFunction = testBasicFunction;
            window.testWindowFunction = testWindowFunction;
            window.testAsyncFunction = testAsyncFunction;
            window.testApiCall = testApiCall;
            window.testFetchError = testFetchError;
            window.testDomManipulation = testDomManipulation;
            window.testElementAccess = testElementAccess;
            window.testConsoleOutput = testConsoleOutput;
            
            // Initialize on load
            document.addEventListener('DOMContentLoaded', function() {
                console.log('üîß Button Click Test page loaded');
                console.log('Available test functions:', Object.keys(window).filter(function(key) {
                    return typeof window[key] === 'function' && key.indexOf('test') === 0;
                }));
            });
            
        })();
    </script>
</body>
</html>

# LIMINAL Go WebSocket Relay

## Архитектура и назначение

**LIMINAL Go WebSocket Relay** — это высокопроизводительный сервер на Go, который обеспечивает real-time доставку событий переходов состояний сознания (state transitions) всем подписанным клиентам через WebSocket.

### Для чего это нужно?
- Мгновенная доставка событий (например, переходов состояний сознания) тысячам клиентов.
- Минимальные задержки и высокая масштабируемость (Go отлично справляется с большим количеством соединений).
- Разделение бизнес-логики (Python/Neo4j) и real-time транспорта (Go).

## Как это работает
1. **Python backend** (например, `consciousness_neo4j.py`) публикует события переходов в Redis pubsub-канал `consciousness_events`.
2. **Go WebSocket relay** слушает этот канал и ретранслирует каждое событие всем подключённым по WebSocket клиентам.
3. **Клиенты** (браузер, мобильное приложение, etc.) получают события в реальном времени по WebSocket (`ws://<host>:8080/ws`).

## Быстрый старт

### 1. Установить Go (если не установлен)
- https://golang.org/dl/

### 2. Склонировать репозиторий и перейти в папку
```
cd go_ws_relay
```

### 3. Инициализировать зависимости
```
go mod tidy
```

### 4. Запустить сервер
```
go run main.go
```

Сервер стартует на `:8080`, WebSocket endpoint: `/ws`

### 5. Python: публикация событий
В Python-коде (например, после создания перехода):
```python
import redis, json
r = redis.Redis(host='localhost', port=6379, db=0)
event = {
    "type": "state_transition",
    "from_state": ...,
    "to_state": ...,
    "timestamp": ...,
    "user_id": ...,
    "transition_id": ...,
    "meta": ...
}
r.publish("consciousness_events", json.dumps(event))
```

### 6. Тестирование
- Подключи WebSocket-клиент к `ws://localhost:8080/ws`
- Сгенерируй событие из Python — оно появится у всех клиентов

---

## Структура проекта
- `main.go` — основной Go WebSocket relay
- `go.mod` — зависимости Go
- `README.md` — эта документация

## TODO/Доработки
- Авторизация и фильтрация событий по каналам/пользователям
- Поддержка нескольких типов событий
- Мониторинг и метрики

---

**LIMINAL: философия реального времени и живое сознание в коде!**

# LIMINAL Production Deployment Configuration
# Copy this file to deployment.env and customize for your environment

# =============================================================================
# CORE APPLICATION SETTINGS
# =============================================================================

# Environment (production, staging, development)
ENVIRONMENT=production

# Application version (will be set by CI/CD)
LIMINAL_VERSION=latest

# Application domain
DOMAIN=api.liminal.consciousness
FRONTEND_DOMAIN=liminal.consciousness

# =============================================================================
# DATABASE CONFIGURATIONS
# =============================================================================

# PostgreSQL Configuration
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=liminal
POSTGRES_USER=liminal
POSTGRES_PASSWORD=your_secure_postgres_password_here
POSTGRES_MAX_CONNECTIONS=100
POSTGRES_POOL_SIZE=20

# Neo4j Configuration
NEO4J_HOST=neo4j
NEO4J_PORT=7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your_secure_neo4j_password_here
NEO4J_MAX_CONNECTION_POOL_SIZE=50
NEO4J_CONNECTION_TIMEOUT=30

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_URL=redis://redis:6379
REDIS_MAX_CONNECTIONS=100
REDIS_CONNECTION_TIMEOUT=30

# Datomic Configuration
DATOMIC_HOST=datomic
DATOMIC_PORT=8080
DATOMIC_URI=http://datomic:8080
DATOMIC_LICENSE_KEY=your_datomic_license_key_here

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# JWT Configuration
JWT_SECRET_KEY=your_very_secure_jwt_secret_key_here_minimum_256_bits
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# API Rate Limiting
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_BURST=200

# CORS Settings
CORS_ORIGINS=https://liminal.consciousness,https://app.liminal.consciousness
CORS_CREDENTIALS=true

# Security Headers
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================

# Prometheus Metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_ENDPOINT=/metrics

# Grafana Dashboard
GRAFANA_ADMIN_PASSWORD=your_secure_grafana_password_here
GRAFANA_PORT=3000

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/app/logs/liminal.log
LOG_ROTATION_SIZE=100MB
LOG_RETENTION_DAYS=30

# Distributed Tracing
JAEGER_ENABLED=true
JAEGER_ENDPOINT=http://jaeger:14268/api/traces

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# =============================================================================
# MACHINE LEARNING SETTINGS
# =============================================================================

# ML Pipeline Configuration
ML_ENABLED=true
ML_MODEL_CACHE_SIZE=100
ML_PREDICTION_TIMEOUT=30
ML_MODEL_STORAGE_PATH=/app/models

# Model Registry
MODEL_REGISTRY_ENABLED=true
MODEL_VERSIONING_ENABLED=true
MODEL_A_B_TESTING_ENABLED=true

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================

# WebSocket Settings
WEBSOCKET_ENABLED=true
WEBSOCKET_MAX_CONNECTIONS=1000
WEBSOCKET_MESSAGE_QUEUE_SIZE=10000
WEBSOCKET_HEARTBEAT_INTERVAL=30

# Connection Management
CONNECTION_POOL_SIZE=100
CONNECTION_TIMEOUT=300
RECONNECTION_ATTEMPTS=3

# =============================================================================
# DEPLOYMENT SETTINGS
# =============================================================================

# Docker Configuration
DOCKER_REGISTRY=ghcr.io
DOCKER_NAMESPACE=your-username/resonance-liminal
LIMINAL_BACKEND_IMAGE=${DOCKER_REGISTRY}/${DOCKER_NAMESPACE}/liminal-backend:${LIMINAL_VERSION}

# Scaling Configuration
MIN_REPLICAS=3
MAX_REPLICAS=10
CPU_TARGET_UTILIZATION=70
MEMORY_TARGET_UTILIZATION=80

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/opt/liminal/backups

# Deployment Strategy
DEPLOYMENT_STRATEGY=blue-green
HEALTH_CHECK_TIMEOUT=300
ROLLBACK_ON_FAILURE=true

# SSL/TLS Configuration
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/liminal.crt
SSL_KEY_PATH=/etc/ssl/private/liminal.key
SSL_PROTOCOLS=TLSv1.2 TLSv1.3

# =============================================================================
# EXTERNAL INTEGRATIONS
# =============================================================================

# Notification Webhooks
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR/DISCORD/WEBHOOK
EMAIL_NOTIFICATIONS_ENABLED=true
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=notifications@liminal.consciousness
SMTP_PASSWORD=your_smtp_password_here

# External APIs
OPENAI_API_KEY=your_openai_api_key_here
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# File Storage
STORAGE_BACKEND=local  # local, s3, gcs
S3_BUCKET=liminal-production-storage
S3_REGION=us-west-2
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Application Workers
UVICORN_WORKERS=4
WORKER_CONNECTIONS=1000
WORKER_TIMEOUT=30

# Database Connection Pooling
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Caching
CACHE_ENABLED=true
CACHE_TTL=300
CACHE_MAX_SIZE=1000

# Queue Configuration
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0
CELERY_WORKERS=4

# =============================================================================
# DEVELOPMENT AND TESTING
# =============================================================================

# Debug Settings (should be false in production)
DEBUG=false
TESTING=false

# API Documentation
DOCS_ENABLED=true
REDOC_ENABLED=true

# Development Tools
RELOAD=false
PROFILING_ENABLED=false

# =============================================================================
# RESOURCE LIMITS
# =============================================================================

# Memory Limits (per container)
BACKEND_MEMORY_LIMIT=2Gi
POSTGRES_MEMORY_LIMIT=2Gi
NEO4J_MEMORY_LIMIT=4Gi
REDIS_MEMORY_LIMIT=1Gi

# CPU Limits (per container)
BACKEND_CPU_LIMIT=1000m
POSTGRES_CPU_LIMIT=1000m
NEO4J_CPU_LIMIT=2000m
REDIS_CPU_LIMIT=500m

# Storage Limits
POSTGRES_STORAGE_SIZE=20Gi
NEO4J_STORAGE_SIZE=50Gi
REDIS_STORAGE_SIZE=10Gi
LOGS_STORAGE_SIZE=10Gi
DATA_STORAGE_SIZE=20Gi

# =============================================================================
# KUBERNETES SPECIFIC (if using K8s deployment)
# =============================================================================

# Namespace
KUBERNETES_NAMESPACE=liminal-production

# Storage Classes
FAST_STORAGE_CLASS=fast-ssd
STANDARD_STORAGE_CLASS=standard

# Ingress Configuration
INGRESS_CLASS=nginx
CERT_MANAGER_ISSUER=letsencrypt-prod

# Node Selector
NODE_SELECTOR_ENVIRONMENT=production
NODE_SELECTOR_WORKLOAD=backend

# =============================================================================
# MONITORING ALERTS
# =============================================================================

# Alert Thresholds
CPU_ALERT_THRESHOLD=80
MEMORY_ALERT_THRESHOLD=85
DISK_ALERT_THRESHOLD=90
ERROR_RATE_THRESHOLD=5
RESPONSE_TIME_THRESHOLD=2000

# Alert Channels
PAGERDUTY_ENABLED=false
PAGERDUTY_INTEGRATION_KEY=your_pagerduty_key_here

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Experimental Features
CONSCIOUSNESS_MONITORING_V2=false
ADVANCED_ANALYTICS=true
QUANTUM_RESONANCE_DETECTION=false
TEMPORAL_STATE_TRACKING=true

# API Features
API_VERSIONING_ENABLED=true
RATE_LIMITING_ENABLED=true
AUTHENTICATION_REQUIRED=true
SWAGGER_UI_ENABLED=true

# ML Features
AUTO_MODEL_RETRAINING=true
REAL_TIME_PREDICTIONS=true
MODEL_DRIFT_DETECTION=true
FEDERATED_LEARNING=false

# =============================================================================
# COMPLIANCE AND GOVERNANCE
# =============================================================================

# Data Privacy
GDPR_COMPLIANCE=true
DATA_ANONYMIZATION=true
AUDIT_LOGGING=true
RETENTION_POLICY_DAYS=365

# Security Compliance
SOC2_COMPLIANCE=true
SECURITY_SCANNING=true
VULNERABILITY_MONITORING=true
PENETRATION_TESTING=false

# =============================================================================
# DISASTER RECOVERY
# =============================================================================

# Backup Strategy
MULTI_REGION_BACKUP=true
CROSS_CLOUD_BACKUP=false
BACKUP_ENCRYPTION=true
BACKUP_COMPRESSION=true

# Recovery Configuration
RTO_MINUTES=60  # Recovery Time Objective
RPO_MINUTES=15  # Recovery Point Objective
DR_SITE_ENABLED=false
FAILOVER_AUTOMATIC=false